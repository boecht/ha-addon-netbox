# Home Assistant add-on manifest for NetBox. Defines metadata, runtime options, and defaults
# consumed by Supervisor when rendering the configuration UI.
name: "NetBox"
version: "0.1.22"
slug: "netbox"
description: "Network asset management tool"
arch:
  - amd64
  - aarch64
url: "https://github.com/boecht/ha-addon-netbox"
startup: services
boot: auto
init: false
panel_icon: mdi:table-network
image: "ghcr.io/boecht/ha-addon-netbox/netbox-{arch}"
ports:
  8080/tcp: 8000
# Supervisor UI labels for exposed ports.
ports_description:
  8080/tcp: "NetBox web UI (container port 8080)"
watchdog: "http://[HOST]:[PORT:8000]/health/"
webui: "http://[HOST]:[PORT:8000]/"
ingress: false
host_network: false
apparmor: true
map:
  - type: share
    read_only: false
  - type: config
    read_only: false
# User-facing options shown on the Configuration tab.
options:
  reset_superuser: false
  allowed_hosts:
    - "*"
  housekeeping_interval: 3600
  enable_prometheus: false
  debug_logging: true
  plugins:
    - netbox_napalm_plugin
    - netbox_ping
    - netbox_topology_views
  napalm_username: ""
  napalm_password: ""
  napalm_timeout: 30

# Validation schema for the options above.
schema:
  reset_superuser: bool
  allowed_hosts:
    - str
  housekeeping_interval: int(300,86400)
  enable_prometheus: bool
  debug_logging: bool
  plugins:
    - str?
  napalm_username: str?
  napalm_password: str?
  napalm_timeout: int(1,600)?
